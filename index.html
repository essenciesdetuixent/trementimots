<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TREMENTIMOTS</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            background-color: #ffffff; 
            color: #1a1a1b;
            margin: 0;
            min-height: 100vh;
            text-align: center;
        }
        
        .game-container {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .header { margin-top: 10px; margin-bottom: 10px; }
        
        .logo {
            max-width: 90px;
            height: auto;
            margin-bottom: 5px;
        }

        h1 { 
            font-size: 2.2rem; 
            letter-spacing: 0.1rem; 
            margin: 0;
            color: #2e5a2e; 
            font-weight: bold;
            text-transform: uppercase;
        }

        .subtitle {
            font-style: italic;
            font-size: 0.95rem;
            color: #538d4e;
            margin-bottom: 5px;
            display: block;
        }

        .instr-text {
            color: #787c7e;
            font-size: 0.85rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .grid { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 8px; 
            margin-top: 10px;
            width: 100%;
            max-width: 300px;
            padding: 0 10px;
            box-sizing: border-box;
        }

        .tile { 
            aspect-ratio: 1 / 1;
            border: 2px solid #d3d6da; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 1.8rem; 
            font-weight: bold; 
            text-transform: uppercase; 
            user-select: none;
            background-color: #ffffff;
        }

        .correct { background-color: #6aaa64; border-color: #6aaa64; color: white; }
        .present { background-color: #c9b458; border-color: #c9b458; color: white; }
        .absent { background-color: #787c7e; border-color: #787c7e; color: white; }

        input { 
            margin-top: 20px; 
            padding: 12px; 
            font-size: 1.2rem; 
            text-transform: uppercase; 
            text-align: center; 
            background-color: #f8f9fa;
            border: 2px solid #d3d6da;
            border-radius: 8px;
            width: 160px;
            outline: none;
        }

        #message { 
            margin-top: 20px; 
            font-weight: bold; 
            padding: 0 20px;
            line-height: 1.4;
        }

        .final-options {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: #43a047; 
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .instagram-link {
            margin-top: 25px;
            display: flex;
            align-items: center;
            gap: 5px;
            color: #2e5a2e;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .instagram-link svg {
            color: #e1306c;
        }

        .instructions-section {
            width: 100%;
            background-color: #f4f4f4; 
            border-top: 1px solid #d3d6da;
            padding: 40px 0;
            margin-top: 40px;
        }

        .instructions-content {
            max-width: 380px;
            text-align: left;
            margin: auto;
            padding: 0 25px;
            font-size: 0.9rem;
        }

        .weekly-tag {
            text-align: center;
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #787c7e;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05rem;
        }

        .color-box { padding: 2px 6px; border-radius: 3px; font-weight: bold; color: white; }
        .gray { background-color: #787c7e; }
        .yellow { background-color: #c9b458; }
        .green { background-color: #6aaa64; }
    </style>
</head>
<body>

    <div class="game-container">
        <div class="header">
            <img src="https://www.essenciesdetuixent.com/wp-content/uploads/2023/07/Projecte-nou.png" alt="Logo" class="logo">
            <h1>TREMENTIMOTS</h1>
            <span class="subtitle">Els mots de les trementinaires</span>
            <span class="instr-text">Instruccions del joc m√©s avall</span>
        </div>
        
        <div class="grid" id="grid"></div>

        <input type="text" id="guessInput" maxlength="5" autofocus placeholder="Escriu...">
        <div id="message"></div>

        <a href="https://www.instagram.com/essenciesdetuixent/" class="instagram-link" target="_blank">
            <svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>
            </svg>
            Segueix-me a Instagram
        </a>
    </div>

    <div class="instructions-section" id="instruccions">
        <div class="instructions-content">
            <span class="weekly-tag">Joc setmanal. Setmana 1</span>
            <h2>Com s'hi juga?</h2>
            <p>Aquesta setmana tens 5 intents per a endevinar un <strong>Trementimot</strong> de 5 lletres.<br><br>
            <span class="color-box gray">Gris</span> = la lletra no hi √©s.<br>
            <span class="color-box yellow">Groc</span> = hi √©s, per√≤ en una altra posici√≥.<br>
            <span class="color-box green">Verd</span> = has encertat lletra i posici√≥.</p>
        </div>
    </div>

    <script>
        const secretWord = "SOFIA"; 
        const maxAttempts = 5; 
        let attempts = 0;
        let gameOver = false;
        let resultsEmoji = "";

        const grid = document.getElementById('grid');
        const input = document.getElementById('guessInput');
        const message = document.getElementById('message');

        for (let i = 0; i < 25; i++) {
            const tile = document.createElement('div');
            tile.classList.add('tile');
            tile.id = 'tile-' + i;
            grid.appendChild(tile);
        }

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !gameOver) {
                const guess = input.value.toUpperCase();
                if (guess.length !== 5) return;
                checkGuess(guess);
                input.value = '';
            }
        });

        function checkGuess(guess) {
            const rowStart = attempts * 5;
            const guessArray = guess.split('');
            const secretArray = secretWord.split('');
            const statuses = Array(5).fill('absent');
            const secretUsed = Array(5).fill(false);
            const guessUsed = Array(5).fill(false);

            // Passada 1: Verds
            guessArray.forEach((letter, i) => {
                if (letter === secretArray[i]) {
                    statuses[i] = 'correct';
                    secretUsed[i] = true;
                    guessUsed[i] = true;
                }
            });

            // Passada 2: Grocs
            guessArray.forEach((letter, i) => {
                if (!guessUsed[i]) {
                    const secretIndex = secretArray.findIndex((l, idx) => l === letter && !secretUsed[idx]);
                    if (secretIndex !== -1) {
                        statuses[i] = 'present';
                        secretUsed[secretIndex] = true;
                    }
                }
            });

            let rowEmoji = "";
            statuses.forEach((status, i) => {
                const tile = document.getElementById('tile-' + (rowStart + i));
                tile.innerText = guess[i];
                tile.classList.add(status);
                rowEmoji += status === 'correct' ? "üü©" : status === 'present' ? "üü®" : "‚¨ú";
            });
            resultsEmoji += rowEmoji + "\n";

            if (guess === secretWord) {
                endGame(true);
            } else {
                attempts++;
                if (attempts === maxAttempts) endGame(false);
            }
        }

        function endGame(win) {
            gameOver = true;
            input.disabled = true;
            
            const winMessages = [
                "Espectacular! üèÜ Ets una trementinaire de soca-rel! üå≤üè∫",
                "Molt b√©! Ets una remeiera de primera! üåø",
                "Ben jugat! Ets una bona aprenenta de trementinaire! üíö",
                "Has trobat el trementimot! Enhorabona! üçÉ",
                "No rendir-se t√© recompensa. Pels p√®ls, per√≤ l'has trobat! üî•"
            ];

            if (win) {
                const mainMsg = winMessages[attempts];
                message.innerHTML = `
                    <p style="color:#2e5a2e; font-size:1.2rem">${mainMsg}</p>
                    <div class="final-options">
                        <button class="btn" onclick="shareResults()">Comparteix! üì≤</button>
                    </div>
                `;
            } else {
                message.innerHTML = `<p>üòå Es veu que avui no tocava... per√≤ gr√†cies per participar-hi! ‚ú®<br><small>La paraula era: ${secretWord}</small></p>`;
            }
        }

        function shareResults() {
            const text = `He resolt el #TREMENTIMOTS de la setmana! üåø\n\n${resultsEmoji}\nJuga-hi a essenciesdetuixent.github.io/trementimots`;
            if (navigator.share) {
                navigator.share({ title: 'TREMENTIMOTS', text: text });
            } else {
                navigator.clipboard.writeText(text);
                alert("Resultats copiats! Ja els pots enganxar a les teves xarxes.");
            }
        }
    </script>
</body>
</html>
